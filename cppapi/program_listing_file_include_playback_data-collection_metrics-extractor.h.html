

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Program Listing for File metrics-extractor.h &mdash; Intel® GPA Framework  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/gpa.css" type="text/css" />
  <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
     
    <script type="text/javascript">
        //configure tms    
        var wapLocalCode = 'us_en'; //dynamically set per localized site, see mapping table for values
        var wapSection = "gpa-sdk";
        //load tms
        (function() {
            var host = (window.document.location.protocol == 'http:') ? "http://www.intel.com" : "https://www.intel.com";
            var url = host+"/content/dam/www/global/wap/tms-loader.js"; //wap file url
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;  po.src = url;
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
    </script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

    <form action="https://software.intel.com/en-us/gpa" method="get" target="_blank">
        <button class="download-button" type="submit">Free Download</button>
    </form>
    

          
            <a href="../index.html">
          

          
            
            <img src="../_static/intel-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../src/getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../src/getting_started.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/getting_started.html#layer-framework-primer">Layer Framework Primer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/getting_started.html#capture-a-stream">Capture a Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/getting_started.html#play-back-stream">Play Back Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/getting_started.html#stack-multiple-layers">Stack Multiple Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/getting_started.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../src/guides.html">Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../src/guides/extending_test_layer.html">Extending “Helloworld” Simple Layer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/guides/extending_test_layer.html#layer-anatomy">Layer Anatomy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/guides/extending_test_layer.html#api-call-routing">API Call Routing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../src/samples.html">Samples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../src/samples.html#how-to-build">How to build</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#windows">Windows*</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../src/samples.html#available-samples">Available Samples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#print-api-log">Print API Log</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#helloworld-simple-layer">‘Helloworld’ Simple Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#helloworld-generated-layer">‘Helloworld’ Generated Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#range-player">Range Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#buffer-extractor">Buffer Extractor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#texture-extractor">Texture Extractor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#sampler-extractor">Sampler Extractor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#shader-extractor">Shader Extractor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#disable-call-in-range">Disable Call in Range</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#metrics-collection">Metrics Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#highlighting-experiment">Highlighting Experiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#pipeline-experiment">Pipeline Experiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#texture-replacement-experiments">Texture Replacement Experiments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/samples.html#advanced-stream-playback">Advanced Stream Playback</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../src/reference.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../src/utilities.html">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/utilities.html#gpa-injector">gpa-injector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/utilities.html#gpa-player">gpa-player</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/utilities.html#gpa-stream-info">gpa-stream-info</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/utilities.html#gpa-stream-analyzer">gpa-stream-analyzer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../src/layers.html">Layers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/layers.html#capture">Capture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/layers.html#screenshot">Screenshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/layers.html#hud-layer">HUD-Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/layers.html#logging">Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../src/python.html">Python Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="library_root.html">C++ Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="library_root.html#class-hierarchy">Class Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="library_root.html#file-hierarchy">File Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="library_root.html#full-api">Full API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library_root.html#namespaces">Namespaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="library_root.html#classes-and-structs">Classes and Structs</a></li>
<li class="toctree-l4"><a class="reference internal" href="library_root.html#enums">Enums</a></li>
<li class="toctree-l4"><a class="reference internal" href="library_root.html#unions">Unions</a></li>
<li class="toctree-l4"><a class="reference internal" href="library_root.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="library_root.html#variables">Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="library_root.html#defines">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="library_root.html#typedefs">Typedefs</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../src/features.html">Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../src/features.html#capture-and-playback">Capture and Playback</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#basic-capture-and-playback">Basic Capture and Playback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#keyframing-capture">Keyframing Capture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#deferred-capture-experimental">Deferred Capture (Experimental)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#range-repeat">Range Repeat</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../src/features.html#stream-analysis">Stream Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#metric-collection">Metric Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#experiments">Experiments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#resource-extraction">Resource Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#api-call-inspection">API Call Inspection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../src/features.html#layers">Layers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#heads-up-display-hud-layer">Heads-Up Display(HUD) Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#screenshot-layer">Screenshot Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#logging-layer">Logging Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/features.html#custom-user-layers">Custom (User) Layers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../src/requirements.html">System Requirements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../src/requirements.html#hardware-requirements">Hardware Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/requirements.html#software-requirements">Software Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/requirements.html#supported-graphics-apis">Supported Graphics APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../src/release_notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../src/release_notes.html#december-2020">2020.4 (14 December 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/release_notes.html#new">NEW</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/release_notes.html#changed">CHANGED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/release_notes.html#fixed">FIXED</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../src/release_notes.html#september-2020">2020.3 (24 September 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/release_notes.html#id2">NEW</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/release_notes.html#id3">CHANGED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/release_notes.html#id4">FIXED</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../src/release_notes.html#june-2020">2020.2 (25 June 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../src/release_notes.html#id5">NEW</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/release_notes.html#id8">CHANGED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../src/release_notes.html#id9">FIXED</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../src/release_notes.html#march-2020">2020.1 (26 March 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/release_notes.html#december-2019">2019.4 (19 December 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/release_notes.html#september-2019">2019.3 (26 September 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/release_notes.html#june-2019">2019.2 (27 June 2019)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../src/troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../src/troubleshooting.html#known-issues-and-limitations">Known Issues and Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/troubleshooting.html#id2">2020.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../src/troubleshooting.html#id3">2019.2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../src/licenses.html">Legal Information</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../src/licenses.html#third-party-content">Third Party Content</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Intel® GPA Framework</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Program Listing for File metrics-extractor.h</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="program-listing-for-file-metrics-extractor-h">
<span id="program-listing-file-include-playback-data-collection-metrics-extractor-h"></span><h1>Program Listing for File metrics-extractor.h<a class="headerlink" href="#program-listing-for-file-metrics-extractor-h" title="Permalink to this headline">¶</a></h1>
<p>↰ <a class="reference internal" href="file_include_playback_data-collection_metrics-extractor.h.html#file-include-playback-data-collection-metrics-extractor-h"><span class="std std-ref">Return to documentation for file</span></a> (<code class="docutils literal notranslate"><span class="pre">include/playback/data-collection/metrics-extractor.h</span></code>)</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/******************************************************************************</span>
<span class="cm">        Copyright 2019 - 2020 Intel Corporation.</span>

<span class="cm">This software and the related documents are Intel copyrighted materials,</span>
<span class="cm">and your use of them is governed by the express license under which they</span>
<span class="cm">were provided to you (&quot;License&quot;). Unless the License provides otherwise,</span>
<span class="cm">you may not use, modify, copy, publish, distribute, disclose or transmit</span>
<span class="cm">this software or the related documents without Intel&#39;s prior written</span>
<span class="cm">permission.</span>


<span class="cm"> This software and the related documents are provided as is, with no express</span>
<span class="cm">or implied warranties, other than those that are expressly stated in the</span>
<span class="cm">License.</span>

<span class="cm">******************************************************************************/</span>

<span class="cp">#pragma once</span>

<span class="cp">#include</span> <span class="cpf">&quot;igpa-config.h&quot;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;playback/callable-receiver.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;playback/data-collection/metrics-query-result.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;playback/data-collection/metrics-requests.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;runtime/event-publisher.h&quot;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="n">gpa</span> <span class="p">{</span>

<span class="k">namespace</span> <span class="n">data_collection</span> <span class="p">{</span>
<span class="k">class</span> <span class="nc">CollectionRange</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">MetricsRequest</span><span class="p">;</span>
<span class="p">}</span>  <span class="c1">// namespace data_collection</span>

<span class="k">namespace</span> <span class="n">metrics</span> <span class="p">{</span>
<span class="k">enum</span> <span class="k">class</span> <span class="nc">GraphicsApi</span><span class="p">;</span>
<span class="k">enum</span> <span class="k">class</span> <span class="nc">QueryManagerType</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">CommandBufferData</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">IMetric</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">IMetricsSource</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">IMetricsSourceComposite</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">IQueryManager</span><span class="p">;</span>
<span class="p">}</span>  <span class="c1">// namespace metrics</span>

<span class="k">namespace</span> <span class="n">playback</span> <span class="p">{</span>

<span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">metrics</span><span class="o">::</span><span class="n">IQueryManager</span><span class="o">*&gt;</span> <span class="n">QueryManagerVector</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">*</span><span class="p">,</span> <span class="n">QueryManagerVector</span><span class="o">&gt;</span> <span class="n">DeviceQueryManagerVectorPair</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">RangeObjectAccessor</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MetricsExtractor</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CallableReceiver</span><span class="p">,</span> <span class="k">public</span> <span class="n">runtime</span><span class="o">::</span><span class="n">EventPublisher</span><span class="o">::</span><span class="n">Subscriber</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">MetricsExtractor</span><span class="p">();</span>
    <span class="o">~</span><span class="n">MetricsExtractor</span><span class="p">();</span>

    <span class="c1">// CallableReceiver overrides</span>
    <span class="kt">void</span> <span class="nf">PostSetupRange</span><span class="p">(</span><span class="n">CallableCache</span><span class="o">*</span> <span class="n">range</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">PreExecuteCall</span><span class="p">(</span><span class="n">Callable</span><span class="o">*</span> <span class="n">callable</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">callIndex</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">PostExecuteCall</span><span class="p">(</span><span class="n">Callable</span><span class="o">*</span> <span class="n">callable</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">callIndex</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">PostExecuteRange</span><span class="p">(</span><span class="n">CallableCache</span><span class="o">*</span> <span class="n">range</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>

    <span class="c1">// EventPublisher::Subscriber implementation</span>
    <span class="kt">void</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="kt">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">topic</span><span class="p">,</span> <span class="n">runtime</span><span class="o">::</span><span class="n">EventData</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">event</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>

    <span class="kt">void</span> <span class="nf">SetRequest</span><span class="p">(</span><span class="n">data_collection</span><span class="o">::</span><span class="n">MetricsRequest</span> <span class="k">const</span><span class="o">*</span> <span class="n">request</span><span class="p">);</span>
    <span class="n">data_collection</span><span class="o">::</span><span class="n">MetricsQueryResult</span> <span class="n">GetResult</span><span class="p">();</span>
    <span class="n">data_collection</span><span class="o">::</span><span class="n">MetricsRequests</span> <span class="n">GetRequestsForMetrics</span><span class="p">(</span>
        <span class="n">metrics</span><span class="o">::</span><span class="n">IMetric</span> <span class="k">const</span><span class="o">**</span> <span class="n">metrics</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">nMetrics</span><span class="p">,</span>
        <span class="n">data_collection</span><span class="o">::</span><span class="n">CollectionRange</span> <span class="k">const</span><span class="o">*</span> <span class="n">collectionRanges</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">nRanges</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="n">data_collection</span><span class="o">::</span><span class="n">MetricsRequests</span> <span class="n">GetRequestsForMetrics</span><span class="p">(</span>
        <span class="n">metrics</span><span class="o">::</span><span class="n">MetricId</span> <span class="k">const</span><span class="o">*</span> <span class="n">metricIDs</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">nMetricIDs</span><span class="p">,</span>
        <span class="n">data_collection</span><span class="o">::</span><span class="n">CollectionRange</span> <span class="k">const</span><span class="o">*</span> <span class="n">collectionRanges</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">nRanges</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

    <span class="n">metrics</span><span class="o">::</span><span class="n">IMetricsSource</span> <span class="k">const</span><span class="o">*</span> <span class="n">GetMetricsSource</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

<span class="k">private</span><span class="o">:</span>
    <span class="n">metrics</span><span class="o">::</span><span class="n">IMetricsSourceComposite</span><span class="o">*</span> <span class="n">mMetricsSourceComposite</span><span class="p">;</span>                      <span class="c1">// Pointer to the composite metrics source used by all query managers for all devices created. It owns the lifetime of the metrics sources. Valid if non-null.</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">DeviceQueryManagerVectorPair</span><span class="o">&gt;</span> <span class="n">mDeviceQueryManagerVectorPairVector</span><span class="p">;</span>  <span class="c1">// Vector of logical device and QueryManagerVector pairs, sorted from lowest device handle/pointer to highest. If mMetricsSourceComposite is non-null, its size is positive. Otherwise, its size is zero.</span>
    <span class="n">data_collection</span><span class="o">::</span><span class="n">MetricsRequest</span> <span class="k">const</span><span class="o">*</span> <span class="n">mRequest</span><span class="p">;</span>                                <span class="c1">// Pointer to a single metrics collection request (has a metrics group and callable ranges to begin and end queries on) created by an earlier call to GetRequestForMetrics. Always testable, can be set after mMetricsSourceComposite is valid, and expected to be non-null before PostSetupRange is called.</span>
    <span class="n">CallableCache</span><span class="o">*</span> <span class="n">mRange</span><span class="p">;</span>                                                          <span class="c1">// Pointer to a range of callables that will be used for a new metrics collection pass (defined by a prior call to SetRequest). Valid after both mMetricsSourceComposite and mRequest are non-null.</span>
    <span class="n">metrics</span><span class="o">::</span><span class="n">CommandBufferData</span><span class="o">*</span> <span class="n">mCommandBufferData</span><span class="p">;</span>                                 <span class="c1">// Pointer to a command buffer data struct that maintains data gathered and needed for query manager subscription. If mMetricsSourceComposite is non-null and PostSetupRange was called (no current way exists to validate this), it will be non-null.</span>
    <span class="kt">bool</span> <span class="n">mCommandBufferDataQueueStrongReference</span><span class="p">;</span>                                    <span class="c1">// Indicates when true that the command queue pointer pointed to by mCommandBufferData contains a strong reference in the commandQueue field. Only used currently for D3D11, in which it is an ID3D11DeviceContext reference. Otherwise, it is false.</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">data_collection</span><span class="o">::</span><span class="n">MetricsQueryResult</span><span class="o">&gt;</span> <span class="n">mResult</span><span class="p">;</span>                   <span class="c1">// Holds results of a metrics collection pass. It is sized and reset based on the metrics request when PostSetupRange is called. Actual values are placed when PostExecuteRange is called, and mSubscribedQueryManager is valid and the query manager unsubscribe is performed. Valid if mCommandBufferData is non-null.</span>
    <span class="n">metrics</span><span class="o">::</span><span class="n">IQueryManager</span><span class="o">*</span> <span class="n">mSubscribedQueryManager</span><span class="p">;</span>                                <span class="c1">// Pointer to subscribed query manager use by a metrics collection pass. Setup in PreExecuteCall based on the callable at the start of a metrics collection range. Set to null after unsubscribing in PostExecuteRange, or an unrecoverable error occurs. Will not be non-null if mCommandBufferData is non-null.</span>
    <span class="kt">uint32_t</span> <span class="n">mSubscriptionStartingMetricIndex</span><span class="p">;</span>                                      <span class="c1">// Subscribed query manager&#39;s associated metric source&#39;s starting composite metric index. Used to properly store metric values in mResult by the results callback that is registered with the query managers. Valid after mSubscribedQueryManager is non-null.</span>
    <span class="kt">bool</span> <span class="n">mBeganQuery</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>                                                       <span class="c1">// Indicates when true that a begin query was performed at the start of the collection range. Used to determine if a matching end query is needed at the end of the collection range. May be tested after mSubscribedQueryManager is non-null.</span>
    <span class="kt">uint32_t</span> <span class="n">mCollectionRangeVisitCount</span><span class="p">;</span>                                            <span class="c1">// Count of collection ranges that have had all their callables executed (PostExecuteCall was called for each of them). Used by PreExecuteCall during a collection range change when there is a new queue, to help determine if waiting for GPU work to be completed is needed before calling IQueryManager::Unsubscribe.</span>
    <span class="kt">bool</span> <span class="n">mCollectionRangeVisited</span><span class="p">;</span>                                                   <span class="c1">// Indicates when true that all callables in a collection range were executed. Used by PreExecuteCall to know IQueryManager::OnExecuteCommandPrior must be called before executing a command buffer/list.</span>
    <span class="kt">bool</span> <span class="n">mLastCollectionRangeVisited</span><span class="p">;</span>                                               <span class="c1">// Indicates when true that all callables in mRequest&#39;s last collection range were executed. Used by PostExecuteCall after submitting a command buffer/list, to help determine if it needs to waiting for associated GPU work to be completed.</span>
    <span class="n">Callable</span><span class="o">*</span> <span class="n">mCollectionRangeEndCallable</span><span class="p">;</span>                                          <span class="c1">// Ending callable pointer from the prior collection range (its last callable). Used by PreExecuteCall during a collection range change and there is a new queue, to wait for the associated GPU work to be completed.</span>
    <span class="kt">bool</span> <span class="n">mCollectionRangeCommandsExecutedAndMayNotBeComplete</span><span class="p">;</span>                       <span class="c1">// Indicates when true that callables/commands were executed that the GPU may not have completed yet. Used by PreExecuteCall as part of a re-subscribe, and by PostExecuteCall after submitting a command buffer/list, to help decide if waiting on those to complete will be performed.</span>

    <span class="n">QueryManagerVector</span><span class="o">*</span> <span class="nf">CreateMetricsResources</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">api</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">instance</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">physicalDevice</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">device</span><span class="p">);</span>

    <span class="kt">bool</span> <span class="nf">CreateMatchedMetricsSourceAndQueryManager</span><span class="p">(</span>
        <span class="n">metrics</span><span class="o">::</span><span class="n">QueryManagerType</span> <span class="n">queryManagerType</span><span class="p">,</span>
        <span class="n">metrics</span><span class="o">::</span><span class="n">GraphicsApi</span> <span class="n">graphicsApi</span><span class="p">,</span>
        <span class="n">metrics</span><span class="o">::</span><span class="n">Category</span> <span class="n">categoryFlags</span><span class="p">,</span>
        <span class="kt">bool</span> <span class="n">includeExtraGroups</span><span class="p">,</span>
        <span class="kt">void</span><span class="o">*</span> <span class="n">instance</span><span class="p">,</span>
        <span class="kt">void</span><span class="o">*</span> <span class="n">physicalDevice</span><span class="p">,</span>
        <span class="kt">void</span><span class="o">*</span> <span class="n">device</span><span class="p">,</span>
        <span class="n">metrics</span><span class="o">::</span><span class="n">IMetricsSource</span><span class="o">**</span> <span class="n">ppMetricsSource</span><span class="p">,</span>
        <span class="n">metrics</span><span class="o">::</span><span class="n">IQueryManager</span><span class="o">**</span> <span class="n">ppQueryManager</span><span class="p">);</span>

    <span class="kt">bool</span> <span class="nf">DestroyMetricsResources</span><span class="p">(</span><span class="n">QueryManagerVector</span><span class="o">*</span> <span class="n">queryManagerVector</span><span class="p">);</span>

    <span class="kt">bool</span> <span class="nf">DestroyMetricsResources</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">device</span><span class="p">);</span>

    <span class="kt">void</span> <span class="nf">DestroyAllMetricsResources</span><span class="p">();</span>

    <span class="kt">void</span><span class="o">*</span> <span class="nf">GetDeviceForCallable</span><span class="p">(</span><span class="n">Callable</span><span class="o">&amp;</span> <span class="n">callable</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">callIndex</span><span class="p">);</span>

    <span class="n">QueryManagerVector</span><span class="o">*</span> <span class="nf">GetQueryManagerVectorForDevice</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">device</span><span class="p">);</span>

    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">DeviceQueryManagerVectorPair</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">GetLowerBoundFromDeviceQueryManagerVectorPairVector</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">device</span><span class="p">);</span>
<span class="p">};</span>

<span class="p">}</span>  <span class="c1">// namespace playback</span>
<span class="p">}</span>  <span class="c1">// namespace gpa</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019 - 2020 Intel Corporation.
This software and the related documents are Intel copyrighted materials, and your
use of them is governed by the express license under which they were provided to
you (License). Unless the License provides otherwise, you may not use, modify, copy,
publish, distribute, disclose or transmit this software or the related documents
without Intel&#39;s prior written permission.
This software and the related documents are provided as is, with no express or implied
warranties, other than those that are expressly stated in the License.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>